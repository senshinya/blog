---
title: 5. 计算机网络
date: 2024-08-06T23:14:00+08:00
category: 系统架构设计师
---

### 网络的功能和分类

* 功能：数据通信、资源共享、管理集中化、分布式处理、负载均衡
* 性能指标：速率、带宽、吞吐量、时延、往返时间、利用率
* 非性能指标：费用、质量、标准化、可靠性、可扩展性、可升级性、易管理性、可维护性
* 按照分布范围划分：LAN、MAN、WAN
* 按拓扑结构划分：总线型、星型、环形、树形、分布式

### 通信技术

* 计算机网络是利用通信技术将数据从一个节点传送到另一节点的过程
* 信道分为 物理信道和逻辑信道
* 发信机进行的信号处理包括：信源编码、信道编码、交织、脉冲形成和调制
* 收信机记性的信号处理包括：解调、采样判决、去交织、信道译码和信源译码
* 同时传递多路数据就需要复用技术和多址技术
* 新一代移动通信技术 5G
  * 基于 OFDM 优化的波形和多址接入
  * 实现可扩展的 OFDM 间隔参数配置
  * OFDM 加窗提高多路传输效率
  * 灵活框架设计
  * 大规模 MIMO
  * 毫米波
  * 频谱共享
  * 先进的信道编码设计

### OSI 七层模型


1. 物理层：链路上传输位，单位 bit，设备包括 中继器和集线器 HUB
2. 数据链路层：把不可靠信道变成可靠信道，单位 帧，设备包括交换机和网桥
3. 网络层：在源节点-目的节点之间进行路由选择、拥塞控制、顺序控制、传送包，保证报文的正确性。单位 IP 分组，设备包括路由器
4. 传输层：端到端间可靠的、透明的数据传输，单位 报文段，协议包括 TCP、UDP，设备包括 网关
5. 会话层：建立通信进程的逻辑名字和物理名字之间的联系，提供进程间建立、管理和中止会话的方法，处理同步与恢复。设备包括 网关
6. 表示层：实现数据转换，设备包括 网关
7. 应用层：对用户不透明地提供各种服务，设备包括 网关

### 局域网和广域网协议

* 以太网是一种局域网组网技术，规范 IEEE 802.3
* ![以太网帧结构](/images/system_architect/982969a6-c1b3-4c44-9f8f-77c0e9b9e559/%E6%88%AA%E5%B1%8F2024-08-07%2021.59.19.png)
* 以太网最小帧长 64 字节
* 无线局域网 WLAN 标准 IEEE 802.11
* WLAN 拓扑结构：点对点、HUB 型、全分布型
* 广域网相关技术：同步光网络（SONET）、数字数据网（DDN）、帧中继（FR）、异步传输技术（ATM）

### TCP/IP 协议

* 网络协议三要素：语法、语义和时序

 ![](/images/system_architect/517ac9bc-a62b-49cb-8c9e-d7a179a1908f/%E6%88%AA%E5%B1%8F2024-08-07%2022.02.27.png)

* 网络层协议
  * IP：网络层核心协议，在源地址和目标地址之间传送数据报，无连接，不可靠
  * ICMP：因特网控制报文协议，传递控制消息（网络是否通、是否可达、路由是否可用）
  * ARP 和 RARP：地址解析协议，ARP 将 IP 地址转换为物理地址，RARP 将物理地址转换为 IP 地址
  * IGMP：网络组管理协议，允许因特网中的计算机参加多播，是计算机用作向相邻多目路由器报告多目组成员的协议，支持组播
* 传输层协议
  * TCP：IP 上采用重发技术，提供一个可靠的、面向连接的、全双工的数据传输服务
  * UDP：不可靠、无连接，传输速率高
* 应用层协议
  * FTP：基于 TCP，可靠的文件传输协议，数据20，控制21
  * HTTP：基于 TCP，超文本传输协议，80
  * SMTP、POP3：基于 TCP，简单邮件传输协议，SMTP25，POP3 110
  * Telnet：基于 TCP，远程连接协议，23
  * TFTP：基于 UDP，小文件传输协议，69
  * SNMP：基于 UDP，简单网络管理协议，161、162
  * DHCP：基于 UDP，动态主机配置协议，为主机动态分配 IP 地址，客户端 68
  * DNS：基于 UDP，域名解析协议，53

### 交换技术

* 交换机功能
  * 集线功能
  * 中继功能
  * 桥接功能
  * 隔离冲突域
* 交换机需要实现的功能
  * 转发路径学习，数据帧中源 MAC 地址建立与端口的映射
  * 数据转发
  * 数据泛洪，如果目的 MAC 不在地址表，则向所有端口转发
  * 链路地址更新

### 路由技术

* 路由器功能包括
  * 异种网络互联
  * 子网协议转换
  * 数据路由
  * 速率适配
  * 隔离网络，防止广播风暴
  * 报文分片和重组
  * 备份、流量控制
* 路由协议可分为内部网关协议 IGP 和外部网关协议 EGP

### 传输介质

* 双绞线：分为无屏蔽双绞线 UTP 和 屏蔽双绞线 STP，即网线，传输距离在 100m 以内
* 网线安装标准：T568A 和 T568B，区别在第 1236 根位置不同

 ![网线安装标准](/images/system_architect/0f918188-b663-4432-8a66-87b36be6a58f/%E6%88%AA%E5%B1%8F2024-08-09%2023.15.24.png)

* 多模光纤 MMF：同时传输多种不同的信号，使用发光二极管 LED 为光源，成本低，传输效率和可靠性低，适用于短距离传输
* 单模光线 SMF：只能传输一种信号，使用激光二极管 LD 作为光源，只支持激光信号的传输，成本高，传输距离远，可靠性高
* 无线信道：无线电波和红外光波

### 通信方式和交换方式

* 通信方向
  * 单工
  * 半双工
  * 全双工
* 同步方式
  * 异步传输：约定起始位和停止位插入字符的起始和结尾处，但是会造成资源浪费，效率低
  * 同步传输：先发送同步帧，结束后又有同步帧确认，效率高
* 交换方式
  * 电路交换：建立专用电路，面向连接，实时性高，链路利用率低
  * 报文交换：以报文为单位，存储转发模式，会有延时、可靠性高，面向无连接
  * 分组交换：以分组为单位，存储转发模式，分为
    * 数据报：各个分组携带地址信息，自由选择不同的路由路径
    * 虚电路：二者建立一条虚拟的通信线路
    * 信元交换：异步传输模式 ATM 采用的交换方式，信元是固定长度的分组，53B，头部 5B 数据 48B，面向连接，可靠

### IP 地址表示

* IP 地址是 32 位的二进制代码，每隔 8 位插入空格，一般采用点分十进制表示：每八位转成十进制。每个十进制范围 0-255
* 分类 IP 地址：32 位分为网络号和主机号，根据网络号位数的不同，分为如下几类

 ![IP 地址分类](/images/system_architect/77a97ec1-6820-48fe-a98e-8589bbbc4355/%E6%88%AA%E5%B1%8F2024-08-09%2023.31.32.png)

* 无分类编址：格式 IP地址/网络号
* 特殊 IP 地址
  * 公有地址：全网唯一
  * 私有地址：非注册地址，内部使用。A 类 10.0 - 10.255，B 类 172.16 - 172.31，C 类 192.168.0 - 192.168.255
  * 全0：只可作为源地址，表示本网络的本主机
  * 全1：只可作为目的地址，对本网络进行广播
  * 主机号全 1：只可作为目的地址，对某网络上所有主机进行广播
  * 网络号 127 主机号非全0/全1：本地环回
  * 网络号 169.254 主机号非全0/全1：Windows 主机 DHCP 服务器故障分配，自动失效

### 子网划分

* 自定义网络号位数，根据主机个数划分出最合适的方案，不造成资源浪费
* 将主机号拿出几位作为子网号，则 IP 地址组成：网络号+子网号+主机号
* 网络号和子网号都为 1，主机号都为 0 的地址称为子网掩码
* 主机号不能全 0 或全 1
* 聚合网络为超网：将网络号取出几位作为主机号

### IPv6

* 地址长度 128 位
* IPv4 和 IPv6 过渡
  * 双协议栈
  * 隧道技术，IPv6 on IPv4
  * 翻译技术，网关转换

### 网络规划和设计

* 三层模型：核心层、汇聚层和接入层
* 核心层提供不同区域的高速数据转发
* 汇聚层将网络业务连接到接入层，并实施安全、流量、负载和路由相关的策略
* 接入层解决用户互访、用户信息的收集和用户管理
* 建筑物综合布线系统 PDS：![PDS](/images/system_architect/e3edf4b6-4aac-4b15-9030-5b9508ece703/%E6%88%AA%E5%B1%8F2024-08-12%2023.10.20.png)
  * 工作区子系统：工作区终端设备到水平子系统的信息插座互联
  * 水平布线（一层）子系统：信息插座和管理子系统互联
  * 设备间子系统：中央主配线架与各种不同设备互联
  * 垂直干线子系统：各楼层设备间子系统互联
  * 管理子系统：各楼层水平布线子系统和垂直干缆线互联
  * 建筑群子系统：各建筑物之间互联

### 廉价磁盘冗余阵列

* RAID 磁盘冗余阵列
* RAID 0 将数据分散在不同磁盘，磁盘利用率最高，访问速度最快，无冗余和错误修复
* RAID 1 在成对的磁盘上互为备份，增加可靠性，可以纠错，利用率 50%
* RAID 2 海明码
* RAID 3 奇偶校验
* RAID 5 交叉存储数据和奇偶校验信息（校验信息总量为一个磁盘容量，但分布式存储在不同磁盘）

### 网络存储技术

* 直接附加存储 DAS：将存储通过 SCSI 接口直接连接到服务器使用。传输距离、连接数量、传输速率、扩展性受限
* 网络附加存储 NAS：通过网络接口与网络直接连接，通过网络访问，有独立存储系统。存储设备仅提供文件系统功能，与服务器分离
* 存储区域网 SAN：通过专用交换机将磁盘阵列与服务器连接起来。将存储设备从传统以太网中分离，称为独立的 SAN 系统结构

### 其他

* 网络地址翻译 NAT
* 默认网关：必须与本机 IP 在同一个网段
* 虚拟局域网 VLAN
  * 不受物理位置限制组织起虚拟局域网
  * 工作在 OSI 第二层和第三层，一个 VLAN 就是一个广播域，VLAN 之间的通信通过第三层的路由器完成
  * 更加灵活，设备移动、添加和修改的管理开销少，可以控制广播活动，提高安全性
* 虚拟专用网 VPN：在公用网络建立专用网络，没有传统专网的端到端的物理线路，而是架构在公用网络服务商所提供的网络平台之上的逻辑网络
* 冲突域和广播域：分别在物理层和数据链路层。路由器可以阻断广播域和冲突域，交换机只能阻断冲突域